## 5. AI-рекомендации (на основе [data/retrofit_measures.csv](data/retrofit_measures.csv))

**Источник вариантов мер:** только данные из [data/retrofit_measures.csv](data/retrofit_measures.csv) (MeasureStore в памяти). ИИ не придумывает меры, а выбирает и ранжирует из этого списка.

**Вход:** данные здания из BuildingStore + список применимых мер из MeasureStore (уже отфильтрованный, как в калькуляторе: prerequisites, текущее состояние утепления/окон).

**Задача промпта:**

1. Выбрать **3 варианта DIY** в бюджетах примерно 100€, 200€, 300€ — только из переданного списка мер, с указанием ожидаемого эффекта в % экономии тепла.
2. Выбрать **3 варианта капитальных/общедомовых работ** (крыша, фасады, окна, отопление) — только из переданного списка. Для каждой: стоимость, % экономии тепла, явно отметить: **«Работу целесообразно проводить для всего здания с привлечением арендодателя»**, когда данные дома это требуют.

**Выход:** сохранять через RecommendationStore (payload — JSON): структурированный ответ с привязкой к measure_id (массивы diy_measures и whole_building_measures; элементы: measure_id, measure_name, estimated_cost_eur, expected_savings_pct, note_landlord_if_applicable). Текстовое резюме от ИИ — в том же JSON при необходимости.

---
